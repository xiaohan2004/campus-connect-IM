# 应用规划文档

## 1. 项目概述

本项目旨在开发一个功能完善、性能稳定的即时通讯应用以供另一个主应用使用，满足用户日常沟通需求，提供良好的用户体验和安全保障。同时，本项目与主应用的联系是作为一个附属的应用。因此我们不提供用户的登录注册功能，由用户每次请求携带的jwt作为身份验证信息，用其中携带的phone字段来区分并验证用户。

强调要点：
1. 本系统不提供用户的登录注册功能，由用户每次请求携带的jwt作为身份验证信息，用其中携带的phone字段来区分并验证用户。
2. 要体现即时通讯系统的特点，也即用户在线、离线都能对发来的消息做相应处理，确保不会有消息没收到。
3. 要考虑用户更换设备后的历史消息同步。

## 2. 技术选型

### 2.1 前端技术栈

- **框架**: Vue.js 3 + Vite
  - 采用组合式API，提高代码复用性和可维护性
  - 使用Pinia进行状态管理
  - Vue Router处理路由

- **UI组件库**: Element Plus/Ant Design Vue
  - 提供丰富的UI组件，加速开发

- **WebSocket客户端**: Socket.io-client/WebSocket API
  - 实现实时通信功能

- **存储**: 
  - IndexedDB用于本地消息缓存
  - LocalStorage用于用户偏好设置

### 2.2 后端技术栈

- **核心框架**: Spring Boot
  - 提供RESTful API服务
  - 易于扩展和维护

- **WebSocket服务**: 
  - Spring WebSocket
  - STOMP协议支持

- **数据库**: 
  - MySQL用于关系型数据存储
  - Redis用于缓存和消息队列

### 2.3 移动端支持(可选)

- **跨平台方案**: 
  - 采用 Capacitor 将现有 Vue 3 + Vite Web 应用打包为 iOS 和 Android 原生 App
  - 保留响应式 Web 设计，兼顾多终端适配与灵活布局
  - 利用 Capacitor 插件调用原生功能（摄像头、推送、文件存储等）
  - 保证代码复用率高，维护成本低，快速迭代发布

### 2.4 部署与运维

- **容器化**: Docker + Docker Compose(可选)
- **CI/CD**: Jenkins/GitHub Actions(可选)

## 3. 功能规划

### 3.1 用户系统

- **联系人管理**:
  - 添加、删除、分组好友
  - 好友查找(手机号)

### 3.2 即时通讯核心功能

- **私聊**:
  - 文本消息
  - 图片、视频、文件传输
  - 阅读状态(已读/未读)
  - 历史消息查看与搜索

- **群聊**:
  - 创建、加入、退出群组
  - 群组管理(成员管理、公告等)
  - 群组消息功能(与私聊类似)
  - @功能
  - 群文件共享

## 4. 系统架构设计

### 4.1 模块划分

- 用户鉴权模块
- 消息处理模块
- 实时通信模块
- 媒体处理模块
- 存储模块

### 4.2 数据模型(核心)

- 用户(User)
- 好友关系(Friendship)
- 群组(Group)
- 消息(Message)
- 聊天会话(Conversation)

### 4.3 API设计原则

- RESTful风格设计
- 版本控制
- 权限控制
- 错误处理统一
- 接口文档完善(Swagger)


## 5. 项目里程碑

### 阶段一: 基础版(MVP)
- 好友添加与管理
- 基本的文本消息
- 基础UI界面

### 阶段二: 标准版
- 图片消息
- 群组功能
- 文件传输
- 相应修改UI界面